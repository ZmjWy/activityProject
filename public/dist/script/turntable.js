$(function(){function t(){}function e(){$.ajax({type:"GET",url:ctxs+"/turntable/h5/getTimes?tel_num=18733595931",dataType:"jsonp",jsonp:"callback",jsonpCallback:"rewardNum",success:function(t){if(100==t.status&&($("#degree").text(t.num),i.num=t.num,t.list&&t.list.length>0)){$(".no-record").hide(),$(".record-list-show").show();var e="";t.list.map(function(t,n){e+='<li class="clearFix"><p>'+t.reward_num+"金币</p><p>"+new Date(t.creation_date).Format("yyyy/MM/dd hh:mm:ss").replace(/\s/g,"<br/>")+"</p><p>已发放</p></li>"}),$(".record-list-show").append(e)}},error:function(t){}})}function n(){$("#record-animate").animate({marginTop:"-0.58rem"},1e3,function(){$(this).css({marginTop:0}),$(this).children().eq(0).appendTo($(this))})}function o(t,e){var n=null,o=0;clearInterval(n),n=setInterval(function(){Math.floor(o/360)<3?o=.5*e*3600+t:(0!=d?a.style.transform="rotate("+(o+360)+"deg)":a.style.transform="rotate("+o+"deg)",clearInterval(n),setTimeout(function(){l=!l,d=o%360,d<=1*s?window.createTurntable("getMoney",{href:"ss://ddd",text:"分享再抽一次",content:"100金币",title:"恭喜获得"}):d<=2*s?window.createTurntable("getMoney",{href:"ss://ddd",text:"分享再抽一次",content:"5万金币",title:"恭喜获得"}):d<=3*s?window.createTurntable("getMoney",{href:"ss://ddd",text:"分享再抽一次",content:"50金币",title:"恭喜获得"}):d<=4*s?window.createTurntable("activeEnd",{img:0,width:1.7,href:"ss://ddd",text:"分享再抽一次",content:"今日奖品已领光<br/>送您300金币<br/>明天早点来吧"}):d<=5*s?window.createTurntable("getMoney",{href:"ss://ddd",text:"分享再抽一次",content:"300金币",title:"恭喜获得"}):d<=6*s?window.createTurntable("getMoney",{href:"ss://ddd",text:"分享再抽一次",content:"50000金币",title:"恭喜获得"}):d<=7*s?window.createTurntable("getMoney",{href:"ss://ddd",text:"分享再抽一次",content:"50金币",title:"恭喜获得"}):d<=8*s&&window.createTurntable("activeEnd",{img:0,width:1.7,href:"ss://ddd",text:"分享再抽一次",content:"今日奖品已领光<br/>送您300金币<br/>明天早点来吧"})},4e3))},30)}var i={num:0};t(),e(),setInterval(n,2500);var r=document.getElementById("turntable-pointer"),a=document.getElementById("turntable-double"),s=45,d=0,l=!0,c=[22,67,112,157,202,247,292,337,382],m=0;r.onclick=function(){i.num>0&&$.ajax({type:"GET",url:ctxs+"/turntable/h5/useTimes?tel_num=18733595931",dataType:"jsonp",jsonp:"callback",jsonpCallback:"reward",success:function(t){100==t.status?l&&(m++,l=!l,o(c[t.type],m)):toast(t.msg)},error:function(t){console.log(t)}})},$("#scroll-rule").on("click",function(){var t=$(".turntable-record").offset().top;$("html, body").animate({scrollTop:t+"px"},800)})}),function($){function t(){}function e(e,n){var o=new t;o[e](n)}t.prototype.mBox=$('<div class="modal-box" style="display: block;position: fixed;width: 100%;height: 100%;background: rgba(0, 0, 0, 0.5);z-index: 999;top: 0;left: auto;"></div>'),t.prototype.sBox=$('<div class="modal-content" style="position: relative;width: 100%;height: 100%;display: flex;align-items: center;justify-content: center;"></div>'),t.prototype.content=$('<div style="width: 4.8rem;height: 5.08rem;background: url("dist/images/turntable-modal-bg_03.png") no-repeat scroll top center/100%;position: relative;"></div>'),t.prototype.close=$('<img src="dist/images/turntable-modal-close_03.png" style="position: absolute;width: 0.28rem;top:0.3rem;right: 0.42rem;">'),t.prototype.addMode=function(t){var e=this;this.content.append(t),this.content.append(this.close),this.sBox.append(this.content),this.mBox.append(this.sBox),$("body").append(this.mBox),this.close.on("click",function(){e.mBox.remove()})},t.prototype.activeEnd=function(t){var e=this,n=["dist/images/turntable-modal-2_03.png","dist/images/turntable-modal-1_03.png"],o=$('<div><img src="'+n[t.img]+'" style="width: '+t.width+'rem;display: block;margin: 0.3rem auto 0;" alt=""><div style="display: flex;justify-content: center;align-items: center;width: 100%;height: 2.2rem;"><p style="font-size: 0.38rem;color: #c77a30;text-align: center;">'+t.content+'</p></div><a class="share" href="'+t.href+'" style="display: block;padding: 0 0.26rem;line-height: 0.68rem;height: 0.68rem;border-radius: 0.68rem;background: #fdba0d;color: #fff;font-size: 0.3rem;text-align: center;max-width: 3.22rem;text-decoration: none;margin: 0 auto;">'+t.text+"</a></div>");this.addMode(o),$(".share").on("click",function(){e.mBox.remove()})},t.prototype.getMoney=function(t){var e=this,n=$('<div><div style="padding: 0.7rem 0 0;"><p style="font-size: 0.38rem;color: #c77a30;text-align: center;padding-bottom: 0.1rem;">'+t.title+'</p><p style="font-size: 0.52rem;color: #c77a30;text-align: center;font-weight: 800;">'+t.content+'</p></div><img src="dist/images/turntable-modal-3_03.png" style="width:1.28rem;display: block;margin: 0.2rem auto 0.3rem;" alt=""><a class="share" href="'+t.href+'" style="display: block;padding: 0 0.26rem;line-height: 0.68rem;height: 0.68rem;border-radius: 0.68rem;background: #fdba0d;color: #fff;font-size: 0.3rem;text-align: center;max-width: 3.22rem;text-decoration: none;margin: 0 auto;">'+t.text+"</a></div>");this.addMode(n),$(".share").on("click",function(){e.mBox.remove()})},window.createTurntable=e}(window.Zepto||window.jQuery);