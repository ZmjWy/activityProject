function goChart(t){function e(){r=20,f=40,o.width=2*document.getElementById("chartBox").offsetWidth,o.height=2*document.getElementById("chartBox").offsetHeight,o.style.height=o.height/2+"px",o.style.width=o.width/2+"px",n=o.height-2*r,h=o.width-2*r,s=2*n/6,c=o.width/2,g=o.height/2,d=60,y=20,x=r,M=r,v=x+d+15,u=M+18,w=m=90*Math.PI/180,rotateAngle=0,T=0,new_data_arr=[];for(var e=0;e<t.length;e++)T+=t[e][0];for(var e=0;e<t.length;e++)new_data_arr.push(t[e][0]/T);totalYNomber=10,P=1,_=50,I=1.2,p=-w,A=50,S=15,b=200}function a(e){for(var h=0;h<t.length;h++){i.fillStyle=i.strokeStyle=t[h][1],i.lineWidth=1;var n=new_data_arr[h]*Math.PI*2,r=p+n/2;p+=n,console.log(r),i.beginPath();var f=c+(s+10)*Math.cos(r),d=g+(s+10)*Math.sin(r);i.arc(f,d,3,0,2*Math.PI),i.fillStyle=t[h][1],i.fill();var y=c+(s+A)*Math.cos(r),x=g+(s+A)*Math.sin(r);new_data_arr[h]<.06&&(y>=f&&h>0?(y=c+(s+(30+7*h))*Math.cos(r+.5),x=g+(s+(30+7*h))*Math.sin(r+.3*h)):y<=f&&h<new_data_arr.length-1&&(y=c+(s+(30+7*h))*Math.cos(r-.5),x=g+(s+(30+7*h))*Math.sin(r-(1.2-.3*h))));var M=y,v=x,u=i.measureText(t[h][2]).width+30;i.moveTo(f,d),yMove=d+(x-d)*P/_,i.lineTo(y,yMove),i.font="24px Microsoft YaHei",y<=f?(M-=20,i.textAlign="right",i.lineTo(M-u,yMove),i.fillText(t[h][2],M-S-b*(_-P)/_,v-S),i.fillText(t[h][0],M-S-b*(_-P)/_,v+30)):(M+=20,i.textAlign="left",i.lineTo(M+u,yMove),i.fillText(t[h][2],M+S+b*(_-P)/_,v-S),i.fillText(t[h][0],M+S+b*(_-P)/_,v+30)),i.stroke()}i.save(),i.translate(c,g),i.rotate("3.1415926");for(var T=0;T<t.length;T++)m+=new_data_arr[T]*P/_*Math.PI*2,i.beginPath(),i.moveTo(0,0),i.arc(0,0,s*P/_,w,m,!1),i.fillStyle=t[T][1],e&&i.isPointInPath(2*X.x,2*X.y)&&(i.globalAlpha=.8),i.closePath(),i.fill(),i.globalAlpha=1,w=m,T==t.length-1&&(w=m=90*Math.PI/180);l(),i.restore(),P<_&&(P++,setTimeout(function(){i.clearRect(-o.width,-o.height,2*o.width,2*o.height),a()},I*=1.085))}function l(){i.rotate(1*Math.PI),i.beginPath(),i.arc(0,0,s/2,0,2*Math.PI),i.fillStyle="#fff",i.fill(),i.closePath(),i.fillStyle="#8d8d8d",i.font="26px Microsoft YaHei",i.textAlign="center",i.fillText("预期金币",0,0-s/12),i.fillStyle="#000",i.font="26px Microsoft YaHei",i.fillText(T,0,0+s/6),i.restore()}var o,i,h,n,r,f,s,c,g,d,y,x,M,v,u,w,m,T,P,_,I,p,A,S,b,X={};o=document.getElementById("chartArc"),o&&o.getContext&&(i=o.getContext("2d")),e(),a();var Y=null;o.addEventListener("mousemove",function(t){t=t||window.event,t.offsetX||0==t.offsetX?(X.x=t.offsetX,X.y=t.offsetY):(t.layerX||0==t.layerX)&&(X.x=t.layerX,X.y=t.layerY),clearTimeout(Y),Y=setTimeout(function(){i.clearRect(0,0,o.width,o.height),a(!0)},10)})}